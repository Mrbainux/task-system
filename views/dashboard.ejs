<!DOCTYPE html>
<html>
<head>
  <title>Dashboard TaskSystem</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <header>
    <h1>Dashboard TaskSystem</h1>
    <nav>
      <a href="/tasks/dashboard">Mes annonces</a>
      <a href="/logout">Déconnexion</a>
    </nav>
  </header>

  <section class="create-task">
    <h2>Créer une nouvelle annonce</h2>
    <form action="/tasks/add" method="POST" enctype="multipart/form-data">
      <label>Titre:</label>
      <input type="text" name="title" placeholder="Ex: Cours de maths pour lycéen" required>

      <label>Description:</label>
      <textarea name="description" rows="3" placeholder="Détaillez le service, durée, matériel fourni..."></textarea>

      <label>Catégorie:</label>
      <select name="category">
        <option value="Ménage & entretien">Ménage & entretien</option>
        <option value="Cours & soutien scolaire">Cours & soutien scolaire</option>
        <option value="Livraison & courses">Livraison & courses</option>
        <option value="Bricolage & réparation">Bricolage & réparation</option>
        <option value="Beauté & bien-être">Beauté & bien-être</option>
        <option value="Événementiel">Événementiel</option>
        <option value="Informatique & web">Informatique & web</option>
        <option value="Autres services">Autres services</option>
      </select>

      <label>Ville / Quartier:</label>
      <input type="text" name="city" placeholder="Ex: Casablanca" required>

      <label>Prix indicatif (MAD):</label>
      <input type="number" name="price" placeholder="Ex: 150">

      <label>Service à domicile:</label>
      <input type="checkbox" name="home_service" value="Oui"> Oui

      <label>Moyen de contact préféré:</label>
      <select name="contact_method">
        <option value="Appel">Appel</option>
        <option value="WhatsApp">WhatsApp</option>
        <option value="Email">Email</option>
      </select>

      <label>Numéro de téléphone:</label>
      <input type="text" name="phone" placeholder="Ex: 06xxxxxxxx" required>

      <label>Image (facultative):</label>
      <input type="file" name="image" accept="image/*">
	  

      <button>Publier l'annonce</button>
    </form>
  </section>

  <section class="my-tasks">
    <h2>Mes annonces</h2>
    <% if(tasks.length > 0){ %>
      <ul>
        <% tasks.forEach(task => { %>
          <li>
            <strong><%= task.title %></strong>
            <span class="category"><%= task.category %></span>
            <p><%= task.description %></p>
            <div class="details">
              Ville: <%= task.city %> | Téléphone: <%= task.phone %>
              <% if(task.price){ %> | Prix: <%= task.price %> MAD <% } %>
              <% if(task.home_service){ %> | Service à domicile: Oui <% } %>
              <% if(task.contact_method){ %> | Contact: <%= task.contact_method %> <% } %>
            </div>
			

            <% if(task.image){ %>
              <img src="/uploads/<%= task.image %>" alt="image" style="max-width:150px;margin-top:5px;">
			  
            <% } %>
            <form action="/tasks/delete/<%= task._id %>" method="POST" style="margin-top:5px;">
          
			  <button style="background-color:#007BFF; color:white; border:none; padding:8px 16px; border-radius:6px; cursor:pointer;">
  Modifier
</button>
			      <button style="background-color:#FF4C4C;">Supprimer</button>



            </form>
          </li>
        <% }) %>
      </ul>
    <% } else { %>
      <p>Aucune annonce publiée pour le moment.</p>
    <% } %>
  </section>

  <footer>© 2025 TaskSystem Maroc</footer>
</body>
</html>
